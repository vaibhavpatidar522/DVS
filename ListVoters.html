<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://cdn.ethers.io/lib/ethers-5.7.1.umd.min.js" type="application/javascript"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="main.js"></script>
    <title>BEIS-Blockchain Electoral Integrity System</title>
    <link rel="stylesheet" href="vote.css">
    <link rel="stylesheet" href="index.css">
</head>
<body>
<header class="head">
    <nav id="nav-bar">
        <div class="nav-img">
            <img src="./images/beis-high-resolution-logo-black-transparent.png" alt="Logo" />
        </div>
        <div class="nav-btns">
            <button class="btn" onclick="window.location.href='vote.html'" style="margin: 50px auto">Vote</button>
            <button class="btn" id="loginButton" style="margin: 50px auto">Login</button>
        </div>
    </nav>
</header>
<div class="container">
    <div class="metamask-list-container">
        <div id="card-alert" class="card light-blue lighten-5">
            <p id="metamasknotification">Metamask is Not Connected</p>
            <button onclick="connectMetamask()" class="btn vote-btn">Connect Metamask</button>
        </div>
    </div>
    <div>
        <p id="votingStatus"></p>
    </div>

    <select id="stateSelect"></select>
    <select id="citySelect"></select>
    <canvas id="pieChart"></canvas>
</div>

<div class="table-graph-container">
    <div class="graph">
        <canvas id="cityBarGraph"></canvas>
    </div>
    <div class="table">
        <h2 id="cityWinner">Winner Candidate from Selected City: </h2>
        <table id="cityCandidateTable" border="1">
            <thead>
                <tr>
                    <th>Candidate</th>
                    <th>Party</th>
                    <th>Votes</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
</div>

<div class="table-graph-container">
    <div class="graph">
        <canvas id="stateBarGraph"></canvas>
    </div>
    <div class="table">
        <h2 id="stateWinner">Winner Party from Selected State: </h2>
        <table id="statePartyTable" border="1">
            <thead>
                <tr>
                    <th>Party</th>
                    <th>Votes</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
</div>

<div class="table-graph-container">
    <div class="graph">
        <canvas id="overallWinnerGraph"></canvas>
    </div>
    <div class="table">
        <h2 id="overallWinner">Overall Winner Party: </h2>
        <table id="overallPartyTable" border="1">
            <thead>
                <tr>
                    <th>Party</th>
                    <th>Votes</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
</div>

<script>
    var loggedIn = localStorage.getItem("loggedIn");
    if (!loggedIn) {
        // Redirect to login page if not logged in
        window.location.href = "login.html";
    }
</script>
</body>
<footer id="nav-bar" style="justify-content: center;">
    <div>Copyright &copy;2024. All Rights Are Reserved</div>
</footer>
</html>
